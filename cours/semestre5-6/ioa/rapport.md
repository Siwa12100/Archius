# Stage IOA - brouillon rapport
---

[...retour menu IOA](./menu.md)

---

## Introduction

Du 8 avril au 21 juin 2024, dans le cadre de ma formation en seconde année de BUT Informatique à l'IUT de Clermont-Ferrand, j'ai eu la chance de réaliser un stage au sein de l'Institut occitan de l'Aveyron. 

Cet institut, dont les locaux se situent d'une part au sein du bâtiment des archives départementales de l'Aveyron à Rodez, et d'autre part dans la maison de l'occitan à Villefranche-de-Rouergue, est un service associé du département de l'Aveyron. 

Il a pour mission de sauvegarder, enrichir, promouvoir et transmettre le patrimoine immatériel occitan de l’Aveyron. Il collecte, numérise et diffuse des témoignages écrits, audio et vidéo, et publie des ouvrages sur la culture occitane aveyronnaise. 

M'intéressant depuis tout jeune à la culture aveyronnaise, dite rouergate, et particulièrement à sa langue, l’occitan languedocien, je suivais assidûment depuis plusieurs années le contenu posté sur YouTube par l'Institut occitan de l'Aveyron. 

Dès l'automne dernier, la perspective d'appliquer de manière concrète mes compétences et connaissances techniques dans le cadre du travail de l’IOA m'a énormément enthousiasmé, et c'est dans ce sens que j'ai décidé de leur transmettre ma candidature spontanée. 

À la suite d'un retour positif de la part de l'Institut occitan, nous avons convenu, lors d'un entretien en visioconférence en présence de Mme Patricia Pallier, la co-directrice, de M. Nils Martin, le réalisateur de l'IOA, et de moi-même, quels seraient les travaux à mener durant mon stage. 

Il a ainsi été décidé que, pour ces 11 semaines de stage, sous la direction de Mme Pallier et de M. Martin, je travaillerais à l'amélioration de l’expérience utilisateur sur le site web de l'Institut occitan de l'Aveyron, ainsi qu'à son extension. 


## Présentation de l'association

### La langue occitane

L'occitan est une langue historique de France, parlée dans 32 départements ainsi qu'en Italie (Alpes du Sud) et en Espagne (Val d'Aran), où elle bénéficie d'un statut officiel. Répartie en six grands dialectes (gascon, languedocien, provençal pour le groupe méridional, et limousin, auvergnat, alpin pour le groupe septentrional), elle se situe au carrefour des principales langues romanes telles que le français, le catalan, l'espagnol, l'italien et le portugais. 

Depuis le XIIe siècle, avec la civilisation des troubadours, l'occitan a rayonné à travers l'Europe, devenant une langue de culture et de poésie. Utilisée quotidiennement jusqu'au milieu du XXe siècle en Aveyron, l'occitan continue de vivre grâce à de nombreux locuteurs, écrivains et un enseignement diversifié (initiation, bilinguisme, immersion, cours pour adultes) sur tout le territoire départemental. Son importance culturelle est immense, préservant une riche histoire et un patrimoine immatériel précieux.

### Un peu d'histoire

En 1986, sous l'impulsion du président Jean Puech, le Conseil général de l'Aveyron a initié une démarche pour sauvegarder le patrimoine occitan. Jean Monteillet a mené ce projet avec le soutien du CALER, du Centre culturel occitan du Rouergue et du Musée du Rouergue. 

L'opération Al canton, qui a marqué une étape majeure, a permis de collecter et de publier 46 ouvrages documentant les traditions et la culture occitane. Cette initiative a été institutionnalisée en 2003 avec la création de l'Institut occitan de l'Aveyron (IOA), dédié à la conservation et à la promotion de ce patrimoine. 

L'IOA a depuis réalisé un travail considérable en numérisant et indexant une vaste quantité de données, facilitant ainsi leur accès public via son site internet.

### Les travaux de l'Institut occitan de l'Aveyron

L'Institut occitan de l'Aveyron (IOA) se consacre à la préservation et à la promotion de la culture occitane à travers divers projets et actions.

L'opération PAÍS, lancée au début des années 2020, est une initiative clé visant à revitaliser l'intérêt pour la langue et la culture occitanes. Cette opération implique l'organisation de réunions locales, la collecte de témoignages contemporains en qualité professionnelle, des animations scolaires et la production de formats pédagogiques et documentaires. 

L'opération PAÍS ne se contente pas de préserver la langue, elle montre aussi qu'elle est encore bien vivante et cherche à toucher un large public, notamment les jeunes générations et les nouveaux arrivants.

Le site web de l'IOA joue un rôle central en hébergeant des milliers de témoignages écrits, audio et vidéo, offrant ainsi une ressource inestimable pour les chercheurs, les enseignants et le grand public. Ce portail en ligne permet une exploration approfondie du patrimoine occitan à travers des bases de données accessibles et interactives. 

Il propose également des clips pédagogiques comme "Cossí dire ?", de courtes vidéos visant à enseigner la langue occitane de manière ludique et accessible. Les séries documentaires telles que "Mon pichon País" explorent divers aspects de la vie en Aveyron à travers des thèmes variés comme l'agriculture, l'histoire locale, les savoir-faire traditionnels et les personnalités marquantes.

La réalisation de courts-métrages complètent cette offre. Leur premier court-métrage, "La lenga defenduda" examine l'état actuel de la langue occitane et son avenir, avec près de 300 entretiens filmés dans diverses communes pour documenter les témoignages des locuteurs. Tandis que leur dernier en date, "Bougnats" retrace l'histoire des migrants aveyronnais partis à Paris pour travailler comme porteurs d'eau et charbonniers, mettant en lumière leur contribution à la vie parisienne et leur attachement à leurs racines occitanes.

### Organisation et fonctionnement

L'Institut occitan de l'Aveyron est soutenu financièrement par le Département de l'Aveyron, les Communautés de communes, la Région Occitanie et la Caisse régionale du Crédit Agricole Nord-Midi-Pyrénées. L'équipe salariée est composée de quatre membres : deux codirecteurs (Patricia Pallier et Jean-Luc Lafon), un réalisateur (Nils Martin) et un monteur (Manuel Senut). L'association est dirigée par Jean-Pierre Gaffier en tant que président, avec Pierre Marcilhac comme trésorier et Christian Sépulcre comme secrétaire. Le fonctionnement de l'IOA repose sur une étroite collaboration avec des partenaires locaux et régionaux, ainsi que sur le soutien de la communauté pour mener à bien ses projets de valorisation et de diffusion de la culture occitane.

## Exposition des objectifs du stage

Pour présenter les objectifs de mon stage, nous allons d'abord examiner l'existant, c'est-à-dire le site internet de l'Institut occitan de l'Aveyron (IOA). Ensuite, nous discuterons de la phase de réflexion qui a conduit à mon intégration dans ce projet, et enfin, nous définirons les objectifs finaux qui ont été établis.

### Partir de l'existant : le site internet de l'IOA

L'Institut occitan de l'Aveyron dispose d'un site internet réalisé en 2019 par l'entreprise privée Laetis. Ce site, conçu avec le CMS Drupal 7, héberge une vaste quantité d'informations, incluant des témoignages écrits, audio et vidéo, ainsi que divers contenus liés à la culture occitane. Cependant, ce site présente plusieurs problèmes d'ergonomie et de facilité d'accès à l'information.

Le site actuel, bien que riche en contenu, souffre d'un manque d'ergonomie. Les visiteurs novices, peu familiers avec la navigation sur ce site, peuvent se retrouver déconcertés par un design qui n'est pas très moderne et qui n'encourage pas l'exploration. En effet, le site semble davantage conçu pour des utilisateurs expérimentés, tels que des chercheurs et des étudiants, qui viennent y rechercher des informations précises. Cette approche limite l'attrait du site pour un public plus large et diversifié.

De plus, le contenu récent de l'IOA, notamment celui de l'opération PAÍS, est peu mis en avant. Les informations récentes se retrouvent souvent noyées dans une masse de contenus divers, ce qui complique la tâche des visiteurs qui cherchent à accéder aux dernières actualités ou aux résultats des projets en cours. Par conséquent, l'impact de l'opération PAÍS est réduit, et sa visibilité en pâtit. Les efforts de l'IOA pour moderniser et dynamiser la présentation de la culture occitane sont ainsi freinés par les limitations du site actuel.

### Phase de réflexion sur l'intégration à l'existant

L'utilisation de Drupal 7 par Laetis pose plusieurs défis. Tout d'abord, le CMS offre peu de modularité en matière de design, ce qui complique la réalisation d'une interface esthétique et attrayante. De plus, la plateforme peut être quelque peu lente, ce qui affecte l'expérience utilisateur. Ces limitations techniques rendent difficile la création d'un site moderne et engageant.

Ensuite, le cadre de mon stage nécessitait une implication plus technique, avec un travail sur le code plutôt qu'une simple utilisation d'outils de glisser-déposer. Le CMS Drupal, bien que puissant, n'était pas adapté à ce besoin spécifique de formation et de développement des compétences techniques.

Enfin, il était impraticable qu'une entreprise privée comme Laetis accorde des accès administratifs à son CMS à un stagiaire non expérimenté et n'appartenant pas à l'entreprise. Cela aurait posé des risques de sécurité et de gestion des contenus.

Face à ces défis, nous avons envisagé de compléter et d'entourer le site existant plutôt que de le modifier directement. L'idée était de créer deux nouveaux sites internet, indépendants du point de vue technique, mais liés au site principal par des redirections. Ces deux sites seraient :

1. Libraria : Ce site aurait pour but de répertorier et de mettre en avant l'immense fonds de livres possédés par l'IOA. Avec plus de 2500 livres disponibles en libre accès à Villefranche-de-Rouergue, il serait crucial de faire connaître ce trésor au public. Le site permettrait de classer ces ouvrages et de donner envie aux visiteurs de se rendre sur place pour les consulter.

2. Pais TV : Ce site reprendrait l'ensemble du contenu vidéo posté sur la chaîne YouTube de l'IOA, incluant les séries et les courts-métrages. L'objectif serait de présenter ces vidéos de manière attrayante et moderne, afin de toucher un public jeune et de donner un coup de projecteur sur la vitalité de la langue et de la culture occitanes.

Pour intégrer ces projets au site existant, nous avons organisé une réunion avec l'entreprise Laetis à Arvieu, en Aveyron. Accompagné de M. Gaffier, M. Martin et Mme Pallier, nous avons discuté des modalités d'intégration de ces nouveaux sites. Il a été convenu de créer des liens de redirection sur la page d'accueil du site principal vers Libraria et Pais TV, avec des icônes et des descriptions pertinentes pour encourager les visiteurs à explorer ces nouvelles ressources. Cette solution a été bien accueillie et soutenue par Laetis, assurant une intégration harmonieuse et efficace des nouveaux sites dans l'écosystème numérique de l'IOA.


### Définition des objectifs du stage

Maintenant que la phase de réflexion a été exposée, il va s'agir de présenter en détail les projets que j'ai menés durant mon stage. D'une part, Libraria et Pais TV évoqués précédemment, mais aussi un nouveau projet qui s'est greffé plus tard, la page sur "Les quilles en Aveyron".

#### Librariá et PAÍS TV

Pour commencer, comme mentionné précédemment, Librariá aurait pour but de faire connaître au public l'existence d'un fonds documentaire accessible, tout en permettant une exploration détaillée de ce fonds. L'IOA possède plus de 2500 livres disponibles en libre accès à Villefranche-de-Rouergue, traitant de l'histoire, de l'occitan, de l'Aveyron et de la vie locale. Le site Librariá devrait ainsi répertorier tous ces ouvrages, les classer par titres, auteurs et nature, et offrir une interface intuitive pour naviguer dans cette collection.

Le site contiendrait une page d'accueil présentant les informations principales et une autre page dédiée à la découverte et à l'exploration des livres du fonds. Une liste défilante des livres afficherait leur couverture, titre et nature. En cliquant sur un livre, l'utilisateur accéderait à une page dédiée contenant une image agrandie de la couverture, des informations supplémentaires telles que la maison d'édition et l'auteur, ainsi qu'un carrousel permettant de consulter le sommaire de chaque livre.

Le véritable défi de Librariá résiderait dans l'intégration des nombreuses images scannées au fil des années : couvertures, quatrièmes de couverture et sommaires de tous les livres. Il serait crucial de créer un espace d'administration où les gestionnaires pourraient ajouter, éditer et supprimer des livres, leurs informations et leurs images. De plus, un système de tableau de données permettrait aux chercheurs et étudiants de réaliser des recherches précises avec des filtres spécifiques.

Ensuite, il y aurait PAÍS TV. Le but de PAÍS TV serait de mettre en avant le contenu multimédia réalisé par l'IOA dans le cadre de l'opération PAÍS, tout en le rendant accessible à un public nouveau ou peu familier avec l'occitan. Le site répertorierait les vidéos de trois types de séries de l'IOA :

- **Cossi dire ?** : Ces clips pédagogiques visent à enseigner la langue occitane de manière ludique et accessible.

- **Mon Pichon País** : Cette série documentaire explore divers aspects de la vie en Aveyron à travers des thèmes variés comme l'agriculture, l'histoire locale, les savoir-faire traditionnels et les personnalités marquantes.
  
- **Courts métrages** : Réalisés annuellement, ces documentaires thématiques utilisent les recherches et les centaines d'heures de témoignages recueillis chaque année pour explorer l'histoire et la culture de l'Aveyron à travers le prisme de la langue occitane.

Le site devrait permettre de trouver facilement les dernières vidéos publiées, tout en offrant une recherche classée et efficace dans l'ensemble du contenu réalisé. En outre, ce nouveau support serait bien plus personnalisable et extensible que Drupal 7, offrant de nombreuses possibilités d'évolution future.

Librariá et PAÍS TV seraient hébergés sous un nouveau nom de domaine, ioa-pais.fr.

#### Les quilles en Aveyron

Peu après le début des travaux sur Librariá, un troisième projet est venu se greffer. Dans une volonté de transversalité entre les différents services du département, l'IOA a été impliqué dans l'organisation d'un nouveau festival en Aveyron, mettant en compétition les joueurs de quilles de 8, un jeu très populaire dans le département, avec le deuxième plus grand nombre de licenciés après le football.

Ma présence à l'IOA a permis de proposer la création d'une page dédiée à ce jeu de quilles, détaillant ses règles, coutumes et histoire, le tout à travers le prisme de la langue occitane. Il a ainsi été convenu qu'un QR code serait affiché en grand sur des bannières lors du festival, redirigeant à la fois vers le site de l'office de tourisme de l'Aveyron et vers notre nouvelle page, située sur le nouveau site PAÍS TV. Le site de l'office de tourisme ferait également une redirection vers nous.

Ce projet supplémentaire a nécessité une réorganisation de mon planning, mais il s'est présenté comme une opportunité formidable d'attirer de nombreux visiteurs sur PAÍS TV via ce QR code. Une attention particulière a dû être portée au design de cette page pour donner une image attrayante et moderne du jeu de quilles et de la culture occitane, incitant les visiteurs à explorer davantage le site.

## Gestion du projet

Met une petite phrase ici en expliquant que maintenant, on va passer à l'étude de ma gestion du projet tout au long des semaines de stage. On va commencer par apporter des précisions sur la manière dont je me suis organisé et jsutifier le fait que les gants ne soient que sur 9 semaines au lieu de 11 de stage. En suite on verra le preivsionel, puis le réel et analysant ses différences. 

### Précision sur la contruction de la gestion de projet

Là tu expliques que comme je l'ai déjà dit précédemment, la premiere semaine, j'ai commencé par m'installer, prendre mes marques, installer sur l'ordi portable qu'ils m'ont donné tous les outils nécessaire au dvlp, et commencer à rfléchir avec eux à mon intégration au projet comme je t'en ai déjà bien parlé. 
Pendant ce temps, le temps de savoir comment j'aller coder et quels objectifs j'aillais avoir, j'ai travaillé sur le reste de la première semaine et sur une partie de la seconde sur des maquettes, de manière à pouvoir travailler et penser un design et une identité visuelle sur le travail que j'alais mener, quel qu'il serait. Que ce soit les palettes de couleurs, la manière d'agencer les éléments, les visuels, et m'assurer que l'on soit bien en accord sur le sytle avec le reste de ce que pense l'IOA. 
J'ai aussi passé du temps à faire des receherches sur les tehcnoloqies que je pourrais utiliser pour la Libraria et Pais TV.
Ce n'est qu'au milieu de la seconde semaine, après la réunion avec Laetis, que le travail tehcnique a vraiment pu commencer. 

C'est donc pour cette raison que je n'ai pas jugé pertinent de faire commencer la GPO directement dès le premeir jour de stage, car au final c'est pendant ces deux premières semaines que j'ai pu faire mes prévisions pour la suite. C'est pour ça que les 2 gantts n'ont que 9 semaines et pas 11, et que la première semaine du Gannt correspond en fait à la seconde semaine de stage, car c'est en réalité à la fin de cette seconde semaine que j'ia pu avoir une vision clair de mes objectifs et m'organiser. 

Pour autant, ces 2 prezmières semaines étaieznt loin d'être du temps perdu, car ça a permet de prnedre le temps de savoir clairemeent ce que j'allais faire d'un point de vue tehcnique, de voir avec Laetis, l'IOA, de choisir les tehcnos, et puis surtout de travailler sur les maquettes qui auraotn fait ganer un temps précieux dans la cré"ation de vues, pour la page des qauilles, livraria et Pais TV. 

### Organisation prévisionnelle

Nous allons maintenant détailler les différentes tâches présentées dans le diagramme de Gantt prévisionnel. Il est important de rappeler que la semaine 1 du Gantt correspond au début de la troisième semaine de stage, soit le lundi 22 avril.

#### Librariá - API web Springboot
La première tâche consisterait à concevoir le service web utilisant Spring Boot et Java, chargé de gérer l'ensemble des données et des images de Librariá. Ce composant constituerait le cœur du projet, essentiel pour la suite du développement. J'aurais prévu d'y consacrer deux semaines, anticipant que ce serait l'une des tâches les plus longues.

#### Librariá - Site web Blazor
Une fois le service web réalisé et déployé, la prochaine étape serait de développer la partie visuelle avec Blazor. J'aurais alloué une semaine pour cette tâche, bénéficiant déjà d'une certaine expérience avec Blazor et la manipulation d'APIs Web avec ce framework. Le travail préalable sur les maquettes aurait également facilité cette phase, permettant une mise en œuvre plus rapide et efficace.

#### Configuration du VPS
Après avoir développé le service web de Librariá et le site associé, il serait nécessaire de les déployer en ligne. Cette tâche inclurait la configuration d'un VPS chez Hostinger, l'achat du nom de domaine ioa-pais.fr, l'activation de HTTPS et la configuration d'un reverse proxy pour gérer les ports et les URL. La configuration comprendrait aussi la mise en place des conteneurs Docker pour isoler les services et garantir une meilleure gestion des ressources.

#### PAÍS TV - Manipulation API YouTube
Avec le VPS configuré et Librariá terminé, je pourrais commencer à travailler sur PAÍS TV. Cette tâche nécessiterait une utilisation approfondie de Blazor et une manipulation fine de l'API YouTube pour récupérer et classer les vidéos de la chaîne YouTube de l'IOA pertinentes pour le site.

#### PAÍS TV - Vues du site Web
Une fois les données des vidéos récupérées, il faudrait développer les vues du site et se concentrer sur l'aspect esthétique. Cette étape inclurait la création de pages attrayantes et l'affichage des vidéos de l'opération PAÍS de manière claire et organisée.

#### Rapport de stage
Une fois les projets Librariá et PAÍS TV terminés, j'aurais prévu de consacrer une semaine entière à la rédaction de mon rapport de stage, afin de documenter et analyser le travail effectué.

#### Marge
Enfin, j'aurais prévu deux semaines de marge pour gérer les imprévus. Travaillant sur des projets concrets et conséquents pour la première fois, utilisant des technologies que je ne connaissais pas encore bien comme MongoDB avec Spring Boot, l'API Google Drive et l'API YouTube, j'aurais préféré anticiper les éventuels défis et ajustements nécessaires. En cas de succès rapide, ces semaines auraient été consacrées à des projets additionnels, tels que l'intégration et la configuration d'IA pour des recherches avancées sur le site de l'IOA. Ces projets auraient exploré la possibilité d'utiliser une IA spécialisée pour effectuer des recherches approfondies et précises dans le contenu du site, améliorant ainsi l'expérience utilisateur et l'accessibilité des informations.

### Organisation réelle

Nous allons maintenant comparer le Gantt réel avec le prévisionnel et expliquer leurs différences.

#### Tâches à la durée altérée et marge prévue consommée

On remarque qu'il s'est avéré sage de prévoir de la marge, puisque les deux semaines prévues à cet effet ont été utilisées. Premièrement, la création de l'API Web Springboot ne m'a pas pris deux semaines, mais trois. 

Cela est dû à deux raisons principales : 

* d'une part, j'avais mal estimé le temps nécessaire pour réaliser ce projet. Bien que je savais qu'il serait long, je l'ai sous-estimé. 
  
* D'autre part, l'utilisation de l'API Google Drive s'est révélée plus complexe que prévu. Si l'intégration de MongoDB avec Springboot a été agréable et facile, l'organisation minutieuse des images et l'authentification auprès de l'API Google avec un token m'ont pris un temps considérable à mettre en place.

L'allongement du temps pour l'API Web Springboot a consommé une semaine de la marge prévue. L'autre semaine a été prise par l'ajout de la page sur les quilles en Aveyron, qui n'était pas prévue initialement. Le design de cette page a nécessité un travail particulièrement soigné, avec une attention particulière portée à la mise en avant des textes de présentation, des médias et des citations fournis par l'IOA pour créer cette page.

#### Tâches réalisées dans les temps

De manière générale, les durées estimées pour la réalisation de la partie Blazor de Librariá, la configuration du VPS, l'utilisation de l'API YouTube en Blazor, les vues de PAÍS TV ainsi que la rédaction du rapport de stage, se sont avérées correctes. Ces tâches ont été réalisées dans les délais prévus, sans nécessiter d'ajustements supplémentaires.

### Bilan sur la gestion du projet

En définitive, la gestion prévisionnelle du projet s'est avérée globalement réaliste, malgré quelques ajustements nécessaires. La marge prévue a été essentielle pour gérer les imprévus et les tâches supplémentaires non anticipées, comme l'intégration de l'API Google Drive et la création de la page sur les quilles en Aveyron.

## Architecture du projet et technologies utilisées 

Ok, tu commences par une petite phrase où tu expliques que cette partie va se concentrer sur l'explication de la structure architecture du projet. Comment les différents éléments fonctionnent ensemble, et quels sont les technos utilisées et pourquoi. Tu dis aussi que l'architecture de Libraria est la plus complète que j'ai mis en place, et celle de pais tv est juste une version simplifiée, donc cette partie se concentre sur la présentation de l'arch. de libraria, et puis dans un dernier, j'expliquerais ce qu'il en est pour Pais tv. 

### Architecture générale du projet

[ici il y aura le schéma que je t'ai donné....]

Tu expliques qu'on remarque que le projet n'est pas resté sur une archi monolituque (tu rappelles ce que c'est rapidement au passage), mais a bien séparé la partie back, front et base de données de manière distincte. Elle a été pensée pour être évolutive, légère, et limiter aussi un maximum les frais d'hébergement, on y reviens dans la partie sur le back end. 


On remarque aussi que cette architecture se rapproche fortement du patron MVC. Ici, tu présentes MVC en quelques lignes. Ensuite, tu expliques pourquoi c'est très proche de MVC.

Tu expliques que la force de cette arhciyecture est donc la séparation claire du back, du front, l'apport de modularité. Mais que d'un autre côté, tout l'enjeu est de réussir une communication éfficace entre tout ça, que ce soit sur la gestion des erreurs, mais aussi sur l'authentification. 

### Technologies sur la partie back-end 

Tu as le schéma sous les yeux, donc si je manque des précisions ou si tu penses qu'il faut rajouter des ifnos sur cette partie, hésite pas. 
Explique donc que le coueur du back end (rappelle ce qu'est le back end ) est le serice web, l'api web springboot. Cette Api permet de faire l'intertace à la vue en lui fournissant les données, et la base de données, en permettant les op. crud. Elle permet la récupération, modif et save d'images avec l'interaction avec google drive. 

Tu expliques donc que l'ensemble des données du modèle présentant dans le service web (en java) sont sauvegardées dans un bdd MongoDB en utilisant l'api MongoDB. Tu accorderas 5 ou 6 lignes sur la présentation de ce qu'est mongodb et la puissance de son utilisation avec Spring Boot.

Tu préciseras que c'est à cet endroit, que sans négliger sur la qualité du projet, on a réussi à faire des économies improtantes dans le budget du projet. En effet, MongoDB permet d'héeberver gratuitement des base de données, tant qu'un seuil de poids n'est pas dépassé. Et des tests ayant été réalisés, la version gratuite est largement suffisante en terme de poids. C'est donc un mpoyen très sur et fiable de d'héberger gratuitement un bdd en lign.

Tu diras aussi que les images sont stockées dans un google drive. En effet là encore, l'API de google drive est utilisée depuis Springboot pour intéragir avec, classer prorpement les mages et effectuer des opérations dessus. Tu dis présente aussi rapidement google drive et dit que c'est là qu'une autrre économié importante est effectuée. En effet, google drive permet d'héeberger sur un drive gratuiement 15 go de stocjage de médias. Et en fait, l'ensemble des images de la lirbaria ne fait que 9 go, on a donc aucun socuis d'héebrgemen,t, et c'est donc une solution ultra fiable, solide et ratuiement pour hérbger et avoir accès à nos fichiers gratuiement, sans néglier la qualité de l'hébergement. 

Pour finir que dans les 2 cas, une authentfication par token est effectuée entre Springboot et MongoDB, ainsi qu'entre s. et google drive. 

### Technologies sur la partie front-end

Sur le front-end, on utlise donc Blazor. Tu expliques ici ce qu'est Blazor en une dizaine de lignes et explique à quel point c'est formidable. Tu dis aussi que j'ai partiuclièrement appréciable de taffer avec et springboot, car le c# reste proche du java, et donc on est très peu dépaysé en passant de l'un à l'autre. 

Tu expliques aussi que une authentification par token avec springsecurity permet de communquer entre le service web et l'appli Blazor. 

### Pais TV

Tu expliques que Pais TV a un fonctionnement assez similaire à Libraria, sauf que dans ce cas là, il n'y a besoin d'enregustrer en bdd ni data, ni fichiers. On a donc pas besoin  de serives web. 

Pais tv utilise aussi Blazor, et utilise l'API De Youtube pour récupérer les vidéos sur la chaine youtube de l'IOA fécupérère celle qui l'intéresse, toutes les infos sur les vidéos, puis les affiche dans la vue. 

## Développement

Tu vas commencer par une petite phrase d'intro qui va dire que mtn on va se pencher sur la phase de développement du projet. On va commencer par revenir sur des outils très utiles que j'ai eu l'occasion d'utiliser dans le cadre de mon développement et dans mon workflow. Ensuite, on se penchera sur une étape importante menée, la config du vps, de l'https et le reverse proxy. Pour finir, je reviendrais sur un socusi quie j'ai eu et comment je l'ai résolu, en abordant la notion des modes de rendu de la tehcno Blazor.

### Outils utilisés

Git et Github

L'ensemble du dvlp a été fait dans des repos git, un pour le site web de la libraria, un pour le service web, et un pour le site pais tv. J'ai utilisé git qutoidemment, avec des commit très réguliers pour m'assurer de tout sauvegarder et travail epuis plusieurs postes de travail, y compris durant mes jours en télétravail. J'ai utilisé des branches à chauqe fois qu'une foncitonnalité étré implémentée, de manière à garder mon code bien propre et éviter les erreurs. L'ensenmble du code est hébergé sur github, où un compte spécialement pour l'institut occitan a été créée. Evidemment, les repos sont privés.

Un autre outil extremement précieux a été Postman (tu présenteras en quelque ligens ce que c'est...). Je l'ai énormément utilisé pour tester le fonctionnment de mon service web et il a été très très utile, aprtculirement pour sauvegarder des reuqêtes fréquentes, mais aussi pour faire des requêtes autre que du get, faire des uploads de fichiers et tester l'authen par token. 

Et pour finir, un autre outil très utile a été mongoDB compass. Il m'a permet d'avoir une interface de gestion visuerlle de la base de données MongoDB, et d'inéragir avec les données, en ajotuer, et en modifer. C'était un très bon moyen de pouvoir faire du ebug, en voyant si les données s'enreistraient bien et donc pour cibler les soucis. 

### Configuration du VPS

La condfiguration du VPS s'est présenté& comme un vértbael défi. j'avais déjà fait de l'administration système, mais je n'avais jamais du configruer un serveur de cettre manièe en partant de 0. Pour commencer, nous avons donc louer u VPS (tu expliqueras ce que c'est un quelques lignes ). Il ne n'était donné au début qu'un accès ssh en root au vps. J'ai commencé par créer et donner les bonnes permissions à un  nouveau utilisateur pour adimnistrer le serveur. J'ai ensuite désactivé le ssh pour le rapport, et changer le port pour le ssh. 

ensite, après beaucoup de documentation et de recherches car je ne savais pas ocmment faire, j'ai utilisé cerf bot pour obtenir un certificat https. Il se renouvelle automatiquement. 

Une autre grande étape a été ensuite de faire en sorte qu'au lieu d'avoir une url comme : https://ioa-pais.fr:8081 pour aller sur le site de la libraria, et https://ioa-pais.fr:8082 par exemple pour aller sur pais tv, je puisse directement alors des url propres sans ports, utilisables par tout le monde, comme ioa-pais.fr et libraria.ioa-pais.fr. 

Là encore, après énorémement de documenttion, j'ai trouvé la solution, le reverse proxy (là je mets le schéma). 

ensuite, en utilisant le schéma, tu explique ce qu'a permis de faire le reverse proxy. 


### Changement de mode de rendu Blazor

Pour cette partie, voilà ce qui s'est passé en fait (extrait d'un mail que j'ai envoyé ):

Le VPS que l'on a pris pour héberger la Libraria et Pais TV est vraiment petit, afin de ne pas payer trop de frais, et donc il y avait de gros soucis de chargement des images (en fait elles ne chargeaient pas du tout, car elles sont assez lourdes).

Comme je l'expliquais à Patricia il y a quelques jours, cela venait du fait que la technologie utilisée pour la création du site est Blazor Server. Et donc, comme son nom l'indique, c'est du côté du serveur que le code est exécuté lorsque l'on se rend sur le site. C'est intéressant dans le sens où cela demande très peu de performance et de connexion à l'utilisateur final, mais par contre, quand le serveur n'est pas très puissant, certaines choses comme des images lourdes ont du mal à charger.

J'ai donc entrepris de passer de Blazor Server à Blazor Web Assembly. C'est une technologie très similaire, mais au lieu d'avoir le code qui est directement exécuté sur le serveur, il est envoyé du côté du client, et c'est directement l'ordinateur de l'utilisateur final qui l'exécute. Cela permet donc de décharger énormément le serveur, et il n'y a plus de soucis de puissance.

Je viens donc de terminer le passage de la Libraria vers Blazor Web Assembly, et le résultat est exactement celui espéré : plus aucun souci de chargement des images ! En plus de cela, puisque nous avions tout de même augmenté un peu la puissance du VPS, l'API qui gère les données peut dorénavant tourner sur le VPS, donc c'est aussi un point positif.


En t'aidant du schéma que je te donne aussi et que je mettrais, explique le soucis que j'ai rencontré, comment je l'ai résolu avec susccès et comment les technos fonctionnent;


---

[...retour menu IOA](./menu.md)